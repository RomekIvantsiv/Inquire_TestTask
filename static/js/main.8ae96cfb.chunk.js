(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{23:function(t,e,n){},29:function(t,e,n){},31:function(t,e,n){},33:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(10),s=n.n(c),a=(n(23),n(4)),o=(n(29),n(2)),i=n.n(o),u=n(5),p=(n(31),function(t){return t.posts}),l=function(t){return t.currentPost},j=function(t){return t.currentPostId},b=function(t){return t.comments},d="https://bloggy-api.herokuapp.com",m=function(){var t=Object(u.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts/").concat(e,"?_embed=comments"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://bloggy-api.herokuapp.com/comments"),{method:"POST",body:JSON.stringify({postId:e,body:n}),headers:{"Content-Type":"application/json"}});case 2:return r=t.sent,t.abrupt("return",r.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts"),{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts/").concat(e),{method:"DELETE",headers:{"Content-type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d,"/posts/").concat(e),{method:"PUT",body:JSON.stringify(n),headers:{"Content-type":"application/json"}});case 2:return r=t.sent,t.abrupt("return",r.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),y=n(8),N=Object(y.b)("SET_POSTS"),w=Object(y.b)("SET_POST"),P=Object(y.b)("SET_CURRENT_POST_ID"),C=Object(y.b)("SET_POST_COMMENTS"),S=Object(y.c)({posts:[],currentPost:null,currentPostId:"",comments:null},(function(t){t.addCase(N,(function(t,e){t.posts=e.payload})),t.addCase(w,(function(t,e){t.currentPost=e.payload})),t.addCase(P,(function(t,e){t.currentPostId=e.payload})),t.addCase(C,(function(t,e){t.comments=e.payload}))})),T=Object(y.a)({reducer:S}),k=n(6),g=(n(33),n(0)),D=function(){var t=Object(r.useState)(""),e=Object(k.a)(t,2),n=e[0],c=e[1],s=Object(a.b)(),o=Object(a.c)(j);return Object(g.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault();var e=n;(function(){var n=Object(u.a)(i.a.mark((function n(r){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,O(r,e);case 3:return n.next=5,h(r);case 5:c=n.sent,s(C(c));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}})()(+o),c("")},children:[Object(g.jsx)("div",{className:"form-field",children:Object(g.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:n,onChange:function(t){var e=t.target;c(e.value)}})}),Object(g.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},E=function(){var t=Object(r.useState)(""),e=Object(k.a)(t,2),n=e[0],c=e[1],s=Object(r.useState)(""),o=Object(k.a)(s,2),p=o[0],l=o[1],b=Object(a.b)(),d=Object(a.c)(j);return Object(g.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault(),function(){var t=Object(u.a)(i.a.mark((function t(e){var r,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={title:n,body:p},t.next=3,_(e,r);case 3:return t.next=5,f(e);case 5:return c=t.sent,t.next=8,m();case 8:s=t.sent,b(w(c)),b(N(s));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(+d),l(""),c("")},children:[Object(g.jsx)("div",{className:"form-field",children:Object(g.jsx)("input",{name:"body",placeholder:"Type new title",className:"NewCommentForm__input",required:!0,value:p,onChange:function(t){var e=t.target;l(e.value)}})}),Object(g.jsx)("div",{className:"form-field",children:Object(g.jsx)("input",{name:"body",placeholder:"Type new body",className:"NewCommentForm__input",required:!0,value:n,onChange:function(t){var e=t.target;c(e.value)}})}),Object(g.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Update a post"})]})},F=function(){var t=Object(a.b)(),e=Object(a.c)(l),n=Object(a.c)(j),c=Object(a.c)(b);return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(+n);case 3:return r=e.sent,e.next=6,h(+n);case 6:c=e.sent,t(w(r)),t(C(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(g.jsx)("div",{className:"App__content",children:Object(g.jsxs)("div",{className:"PostDetails",children:[Object(g.jsx)("h2",{children:"Post details:"}),Object(g.jsx)("section",{className:"PostDetails__post",children:Object(g.jsxs)("p",{children:[Object(g.jsx)("span",{className:"PostDetails__description",children:"Post description: "}),null===e||void 0===e?void 0:e.body]})}),0!==(null===c||void 0===c?void 0:c.comments.length)?Object(g.jsx)("h3",{children:"Comments to post: "}):Object(g.jsx)("h3",{children:"No comments yet"}),Object(g.jsx)("ul",{className:"PostDetails__list",children:null===c||void 0===c?void 0:c.comments.map((function(t){return Object(g.jsx)("li",{className:"PostDetails__list-item",children:Object(g.jsx)("p",{children:t.body})},t.id)}))}),Object(g.jsxs)("section",{className:"PostDetails__form",children:[Object(g.jsx)("h3",{children:"Add comment"}),Object(g.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(g.jsx)(D,{})})]}),Object(g.jsxs)("section",{className:"PostDetails__form",children:[Object(g.jsx)("h3",{children:"Edit post"}),Object(g.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(g.jsx)(E,{})})]})]})})},L=(n(35),function(){var t=Object(a.b)(),e=Object(a.c)(p),n=Object(a.c)(j);Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:n=e.sent,t(N(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=function(){var e=Object(u.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n);case 2:return e.next=4,m();case 4:r=e.sent,t(N(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"App__sidebar",children:Object(g.jsxs)("div",{className:"PostsList",children:[Object(g.jsx)("h2",{children:"Posts:"}),Object(g.jsx)("ul",{className:"PostsList__list",children:e.map((function(e){return Object(g.jsxs)("li",{className:"PostsList__item",children:[Object(g.jsxs)("p",{className:"PostsList__title",children:[Object(g.jsx)("span",{className:"PostsList__title-bold",children:"Post title: "}),e.title]}),Object(g.jsxs)("div",{className:"button__container",children:[+n===e.id?Object(g.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){t(P(""))},children:"Close details"}):Object(g.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){t(P(String(e.id)))},children:"Open details"}),Object(g.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(e.id)},children:"Delete post"})]})]},e.id)}))})]})})}),A=(n(36),function(){var t=Object(a.b)(),e=Object(r.useState)(""),n=Object(k.a)(e,2),c=n[0],s=n[1],o=Object(r.useState)(""),p=Object(k.a)(o,2),l=p[0],j=p[1],b=function(){var e=Object(u.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={title:c,body:l},e.next=4,x(r);case 4:return e.next=6,m();case 6:a=e.sent,t(N(a)),s(""),j("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("form",{className:"NewPostForm",onSubmit:b,children:[Object(g.jsx)("h2",{children:"Add a new post"}),Object(g.jsxs)("div",{className:"form-wrapper",children:[Object(g.jsx)("div",{className:"form-field",children:Object(g.jsx)("input",{type:"text",name:"title",placeholder:"Write a title",className:"NewPostForm__input",required:!0,value:c,onChange:function(t){var e=t.target;s(e.value)}})}),Object(g.jsx)("div",{className:"form-field",children:Object(g.jsx)("input",{name:"body",placeholder:"Write description",className:"NewPostForm__input",required:!0,value:l,onChange:function(t){var e=t.target;j(e.value)}})}),Object(g.jsx)("button",{type:"submit",className:"NewPostForm__submit-button button",children:"Add a post"})]})]})}),I=function(){var t=Object(a.c)(j);return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)("main",{className:"App__main",children:[Object(g.jsx)(L,{}),t&&Object(g.jsx)(F,{}),Object(g.jsx)(A,{})]})})};s.a.render(Object(g.jsx)(a.a,{store:T,children:Object(g.jsx)(I,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.8ae96cfb.chunk.js.map